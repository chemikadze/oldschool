    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
    <head>
      <title>name</title>
      <meta http-equiv="Content-Type" content="text/html; charset=" />
      <meta name="description" content="Условия задач" />
      <link rel="stylesheet" type="text/css" href="statements_print.css" />
    </head>
    <body>
    <a name="top"></a>
    <p class="statements_title">Условия задач</p>
    <p class="statements_summary"></p>
    <div class="statements_info"><table>
    <tr>
    <td>Сайт:</td>
    <td><a href="http://informatics.mccme.ru/moodle">Дистанционная подготовка</a></td>
    </tr><tr>
    <td>Курс:</td>
    <td>Всероссийская олимпиада школьников</td>
    </tr><tr>
    <td>statements:</td>
    <td>Условия задач</td>
    </tr><tr>
    <td>Printed by:</td>
    <td>Николай Соколов</td>
    </tr><tr>
    <td>Date:</td>
    <td>Среда  16 Апрель 2008, 10:33</td>
    </tr>
    </table></div>

    <div class="statements_toc_alpha"><a name="toc"></a><p class="statements_chapter_title">List of problems</p><ul><li><a title="&lt;B&gt;Problem A.&lt;/B&gt; Уроки физкультуры" href="#ch49"><B>Problem A.</B> Уроки физкультуры</a></li><li><a title="&lt;B&gt;Problem B.&lt;/B&gt; Электрички на перегонах не меняют" href="#ch50"><B>Problem B.</B> Электрички на перегонах не меняют</a></li><li><a title="&lt;B&gt;Problem C.&lt;/B&gt; Ударим мостом по бездорожью" href="#ch51"><B>Problem C.</B> Ударим мостом по бездорожью</a></li></ul></div><div class="statements_chapter"><a name="ch49"></a><p class="statements_chapter_title"><B>Problem A.</B> Уроки физкультуры</p>
<table width="667" cellspacing="0" cellpadding="7" border="0"> <col width="302"></col> <col width="337"></col> <tbody>
  <tr valign="top">
    <td width="302">
      <p align="justify"><font size="2" style="font-size: 11pt;"><i>Максимальное время работы на одном тесте:</i></font></p>
    </td>
    <td width="337">
      <p lang="en-US" align="justify" style="font-style: normal;"><font size="2" style="font-size: 11pt;"><span lang="ru-RU">1</span><span lang="ru-RU"> секунд</span>а</font></p>
    </td>
  </tr>
  <tr valign="top">
    <td width="302">
      <p align="justify"><font size="2" style="font-size: 11pt;"><i>Максимальный объем используемой памяти:</i></font></p>
    </td>
    <td width="337">
      <p lang="ru-RU" align="justify" style="font-style: normal;"><font size="2" style="font-size: 11pt;">256 мегабайт</font></p>
    </td>
  </tr> </tbody>
</table>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">Сегодня в 5-А классе праздник — урок физкультуры. Традиционно ребята в это время после небольшой разминки играют в футбол. Коля очень любит футбол, но сегодня, проходя мимо учительской, он случайно услышал, что несколько самых сильных школьников из 5-А во время урока физкультуры должны помочь разгружать новые парты. Что же делать? Ведь Коля предпочитает поиграть в футбол!</font></p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">В голове Коли моментально созрел план. Коля знает, что в 5-А классе </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">школьников. Он хочет воспользоваться тем, что учитель физкультуры Иван Петрович на уроках вместо обычной расстановки школьников в шеренгу по росту практикует расстановку «по силе». Для этого Иван Петрович сначала расставляет </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"> школьников по росту, а затем (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N </i></span></font><font size="2" style="font-size: 11pt;">–</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">1) раз проходит вдоль шеренги слева направо, каждый раз начиная с самого левого (первого) школьника и заканчивая предпоследним школьником справа. Проходя мимо школьника, который стоит на </font><font size="2" style="font-size: 11pt;"><i>i</i></font><font size="2" style="font-size: 11pt;">-м месте</font><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">(1</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N </i></span></font><font size="2" style="font-size: 11pt;">–</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">1), Иван Петрович просит его помериться силой с соседом справа, который стоит на (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i </i></span></font><font size="2" style="font-size: 11pt;">+</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">1)-м месте. Если школьник, стоящий левее, оказывается сильнее своего соседа справа, то они меняются местами. Если же силы школьников оказываются равны, либо слева стоит более слабый школьник, то школьники остаются на своих местах. После этого Иван Петрович просит помериться силой школьников, стоящих на местах (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i </i></span></font><font size="2" style="font-size: 11pt;">+</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">1) и (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">+</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">2), и т.</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">д., заканчивая каждый проход школьниками, которые стоят на местах (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"> – 1) и </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"><i>. </i></font><font size="2" style="font-size: 11pt;">При любом сравнении «по силе» все школьники, включая Колю, показывают свою реальную силу, так как не хотят прослыть слабаками. </font> </p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">Для увеличения шансов поиграть в футбол, Коля хотел бы оказаться как можно левее в получившейся шеренге. Силу каждого из своих одноклассников он знает. По предыдущим занятиям Коля заметил, что если присесть «завязывать шнурки» при каком-либо из проходов учителя, то Иван Петрович во время такого прохода не будет просить Колю мериться силой ни с соседом слева, ни с соседом справа, и, тем более, не будет просить мериться силой соседей Коли, так как они не стоят рядом. Однако, чтобы сохранить силы для игры в футбол, Коля не может присесть более </font><font size="2" style="font-size: 11pt;"><i>k</i></font><font size="2" style="font-size: 11pt;"> раз.</font></p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">Требуется написать программу, которая определит, как нужно действовать Коле, чтобы после проведения расстановки «по силе» оказаться в шеренге как можно левее.</font></p>
<p align="justify" style="margin-top: 0.21cm; margin-bottom: 0.11cm;"><font face="Arial, sans-serif"><font size="3"><i><b>Формат входных данных</b></i></font></font></p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">В первой строке входного файла задаются три целых числа: </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">— число школьников в классе, </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>p</i></span></font><font size="2" style="font-size: 11pt;"> — место Коли в шеренге по росту, и </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>k</i></span></font><font size="2" style="font-size: 11pt;"><i> — </i></font><font size="2" style="font-size: 11pt;">количество приседаний, которое Коля может сделать, не потеряв при этом способность играть в футбол (2</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N </i></span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">100</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">000, 1</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>p </i></span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"><i>, </i></font><font size="2" style="font-size: 11pt;">1</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>k </i></span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">–</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">1).</font></p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">Во второй строке задаются целые числа </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;">1</font></sub><font size="2" style="font-size: 11pt;">,</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;">2</font></sub><font size="2" style="font-size: 11pt;">,</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">...,</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i> </i></span></font><font size="2" style="font-size: 11pt;"><i>a</i></font><sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N</i></span></font></sub><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">(1</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font></sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i> </i></span></font><font size="2" style="font-size: 11pt;">≤</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;">10</font><sup><font size="2" style="font-size: 11pt;">9</font></sup><font size="2" style="font-size: 11pt;">). Число </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font></sub><font size="2" style="font-size: 11pt;"> показывает силу школьника, который стоит на </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font><font size="2" style="font-size: 11pt;">-м месте по росту. Школьник, который стоит на </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font><font size="2" style="font-size: 11pt;">-м месте в расстановке по росту,</font><font size="2" style="font-size: 11pt;"><i> </i></font><font size="2" style="font-size: 11pt;">сильнее школьника, который стоит </font><font size="2" style="font-size: 11pt;"><i>j</i></font><font size="2" style="font-size: 11pt;">-м месте в расстановке по росту, если </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>i</i></span></font></sub><font size="2" style="font-size: 11pt;"><span lang="en-US"><i> </i></span></font><sub><font size="2" style="font-size: 11pt;"><i> </i></font></sub><font size="2" style="font-size: 11pt;">&gt;</font><font size="2" style="font-size: 11pt;"><span lang="en-US"> </span></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>a</i></span></font><sub><font size="2" style="font-size: 11pt;"><i>j</i></font></sub><font size="2" style="font-size: 11pt;"><i>.</i></font></p>
<p align="justify" style="margin-top: 0.21cm; margin-bottom: 0.11cm;"><font face="Arial, sans-serif"><font size="3"><i><b>Формат выходных данных</b></i></font></font></p>
<p style="margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">В первой строке выведите самую левую позицию в шеренге, в которой может оказаться Коля после построения школьников «по силе». Во второй строке выведите любую из возможных стратегий Коли, приводящую к этому результату. Стратегия выводится в виде строки из (</font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>N </i></span></font><font size="2" style="font-size: 11pt;"><i>–</i></font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i> </i></span></font><font size="2" style="font-size: 11pt;">1) символов, </font><font size="2" style="font-size: 11pt;"><i>j</i></font><font size="2" style="font-size: 11pt;">-й символ этой строки должен быть равен символу «</font><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">+</font></font><font size="2" style="font-size: 11pt;">», если на </font><font size="2" style="font-size: 11pt;"><span lang="en-US"><i>j</i></span></font><font size="2" style="font-size: 11pt;">-м проходе Коле необходимо присесть, и символу «</font><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">-</font></font><font size="2" style="font-size: 11pt;">» — в противном случае.</font></p>
<p align="justify" style="margin-top: 0.21cm; margin-bottom: 0.11cm;"><font face="Arial, sans-serif"><font size="3"><i><b>Пример</b></i></font></font></p>
<table width="668" cellspacing="0" cellpadding="7" bordercolor="#000000" border="1"> <col width="319"></col> <col width="319"></col> <tbody>
  <tr valign="top">
    <td width="319">
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;"><b>sport.in</b></font></font></p>
    </td>
    <td width="319">
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;"><b>sport.out</b></font></font></p>
    </td>
  </tr>
  <tr valign="top">
    <td width="319">
      <p lang="en-US" align="left" style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">10 7 7</font></font></p>
      <p lang="en-US" align="left"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">8 3 5 4 5 7 4 2 1 3</font></font></p>
    </td>
    <td width="319">
      <p lang="en-US" align="left" style="margin-bottom: 0cm;"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">3</font></font></p>
      <p lang="en-US" align="left"><font face="Courier New, monospace"><font size="2" style="font-size: 11pt;">---++-+++</font></font></p>
    </td>
  </tr> </tbody>
</table>
<p align="justify" style="margin-top: 0.21cm; margin-bottom: 0.11cm;"><font face="Arial, sans-serif"><font size="3"><i><b>Примечание</b></i></font></font></p>
<p align="justify" style="text-indent: 1.25cm; margin-bottom: 0cm;"><font size="2" style="font-size: 11pt;">Решения, корректно работающие при <span lang="en-US"><i>N</i></span> ≤ 3000, будут оцениваться, исходя из 70 баллов.</font></p> </div><div class="statements_chapter"><a name="ch50"></a><p class="statements_chapter_title"><B>Problem B.</B> Электрички на перегонах не меняют</p><table cellspacing="0" cellpadding="7" width="667" border="0"><colgroup><font size="1"><col width="302"></col></col><//col></col><//col></><//><col width="337"></col></col><//col></col><//col></><//></font></colgroup><tbody> 
  <tr valign="top"> 
    <td width="302"> 
      <p align="justify"><font style="font-size: 11pt" size="1"><i>Максимальное время работы на одном тесте:</i></font></p> 
    </td> 
    <td width="337"> 
      <p lang="en-US" style="font-style: normal" align="justify"><font style="font-size: 11pt"><font size="1"><span lang="ru-RU">1 секунд</span>а</font></font></p> 
    </td> 
  </tr> 
  <tr valign="top"> 
    <td width="302"> 
      <p align="justify"><font style="font-size: 11pt" size="1"><i>Максимальный объем используемой памяти:</i></font></p> 
    </td> 
    <td width="337"> 
      <p lang="ru-RU" style="font-style: normal" align="justify"><font style="font-size: 11pt" size="1">256 мегабайт</font></p> 
    </td> 
  </tr></tbody> 
</table>
<p lang="ru-RU" style="margin-bottom: 0cm; text-indent: 1.25cm; widows: 2; orphans: 2" align="justify"><font color="#000000"><font face="Times New Roman, serif" size="1">На пригородной железной дороге <span lang="en-US"><i>N</i></span> станций и <span lang="en-US"><i>M</i></span> соединяющих их перегонов. Любые две станции соединены не более чем одним перегоном. Сеть перегонов устроена так, что, отправившись от любой станции, можно вернуться на нее, только проехав хотя бы один перегон дважды. На железной дороге организовано движение электричек. Каждая электричка ходит в обоих направлениях по своему маршруту между двумя конечными станциями и останавливается на всех промежуточных станциях</font></font></p>
<p lang="ru-RU" style="margin-bottom: 0cm; text-indent: 1.25cm; widows: 2; orphans: 2" align="justify"><font color="#000000"><font face="Times New Roman, serif" size="1">Для удобства пассажиров руководство железной дороги решило ввести новую систему оплаты проезда. По этой системе каждой станции присваивается некоторое целое число, называемое тарифным номером этой станции. Стоимость проезда между двумя станциями без пересадок определяется модулем разности тарифных номеров этих станций. Тарифные номера станций вдоль маршрута каждой электрички должны изменяться монотонно, то есть при движении в каком-либо направлении строго возрастать и, следовательно, строго убывать при движении в обратном направлении. Это обеспечивает рост стоимости проезда с увеличением количества пройденных перегонов.</font></font></p>
<p style="margin-bottom: 0cm"><font size="1">Требуется написать программу, которая назначит каждой станции тарифный номер.</font></p>
<p style="margin-bottom: 0cm"><font size="1"><br /></font></p>
<table bordercolor="#000000" cellspacing="0" cellpadding="7" width="695" border="1"><colgroup><font size="1"><col width="332"></col></col><//col></col><//col></><//><col width="333"></col></col><//col></col><//col></><//></font></colgroup><tbody> 
  <tr valign="top"> 
    <td width="332"> 
      <p style="margin-bottom: 0cm"><span lang="en-US"><font size="1"><img title="1" height="120" alt="1" hspace="0" src="http://informatics.mccme.ru/moodle/file.php/4/1.jpg" width="197" border="0" /></font></span></p> 
    </td> 
    <td width="333"> 
      <p style="margin-bottom: 0cm"><font size="1">4 станции, 3 перегона: 1-4, 2-4, 3-4</font></p> 
      <p style="margin-bottom: 0cm"><font size="1">Маршруты: 1-4-2, 2-4-3, 3-4-1.</font></p> 
      <p style="margin-bottom: 0cm"><font size="1"><br /></font></p> 
      <p><font size="1"><b>Ответ</b>: решения нет</font></p> 
    </td> 
  </tr> 
  <tr valign="top"> 
    <td width="332"> 
      <p style="margin-bottom: 0cm"><span lang="en-US"><font size="1"><img title="2" height="187" alt="2" hspace="0" src="http://informatics.mccme.ru/moodle/file.php/4/2.jpg" width="231" border="0" /></font></span></p> 
    </td> 
    <td width="333"> 
      <p style="margin-bottom: 0cm"><font size="1">5 станций, 4 перегона: 1-5, 2-5, 3-5, 4-5</font></p> 
      <p style="margin-bottom: 0cm"><font size="1">Маршруты: 1-5-2, 2-5-3, 3-5-4, 4-5-1.</font></p> 
      <p style="margin-bottom: 0cm"><font size="1"><br /></font></p> 
      <p style="margin-bottom: 0cm"><font size="1"><b>Ответ</b>: решение есть; например, следующее: номер станции: 1 2 3 4 5</font></p> 
      <p style="margin-bottom: 0cm"><font size="1">тарифный номер: 1 4 1 5 3</font></p> 
      <p style="margin-bottom: 0cm"><font size="1"><br /></font></p> 
      <p><font size="1"><b>Замечание</b>: тарифные номера разных станций могут совпадать.</font></p> 
    </td> 
  </tr></tbody> 
</table>
<p lang="en-US" style="margin-bottom: 0cm"><font size="1"><br /></font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0.11cm" align="justify"><font face="Arial, sans-serif" size="1"><i><b>Формат входных данных</b></i></font></p>
<p style="margin-bottom: 0cm"><font size="1">В первой строке входного файла содержатся два целых числа: <span lang="en-US"><i>N</i></span> — количество станций (2<span lang="en-US"> </span>≤<span lang="en-US"> </span><span lang="en-US"><i>N</i></span><i> </i>≤ 100 000), и <span lang="en-US"><i>M</i></span><span lang="en-US"> </span>— количество перегонов между ними (1<span lang="en-US"> </span>≤<span lang="en-US"> </span><span lang="en-US"><i>M </i></span>≤<span lang="en-US"> </span><span lang="en-US"><i>N</i></span> – 1). В последующих <span lang="en-US"><i>M</i></span> строках записаны пары целых чисел <span lang="en-US"><i>a</i></span>,<i> </i><span lang="en-US"><i>b</i></span> (<i>a ≠ b</i>, 1 ≤ <i>a</i> ≤ <i>N, </i>1 ≤ <i>b</i> ≤ <i>N</i>), означающие наличие перегона между станциями <span lang="en-US"><i>a</i></span> и <span lang="en-US"><i>b</i></span><i>. </i>За ними в отдельной строке записано единственное целое положительное число <span lang="en-US"><i>K</i></span> — количество маршрутов электричек. В последующих <span lang="en-US"><i>K</i></span> строках идут описания маршрутов электричек, по одному на строке. Каждое описание представляет собой последовательность целых чисел — номеров всех станций маршрута в порядке одного из двух возможных направлений следования электрички. Описание маршрута заканчивается числом 0. </font></p>
<p style="margin-bottom: 0cm"><font size="1">Все номера станций в описании маршрута различны. Количество станций в каждом маршруте не менее двух. Любые две последовательные станции в маршруте каждой электрички соединены перегоном. Суммарное количество станций в описаниях всех маршрутов не превосходит<span lang="en-US"> </span>200 000. Могут быть станции и перегоны, через которые не проходит ни одна электричка.</font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0.11cm" align="justify"><font face="Arial, sans-serif" size="1"><i><b>Формат выходных данных</b></i></font></p>
<p style="margin-bottom: 0cm"><font size="1">В первую строку выходного файла выведите «<font face="Courier New, monospace"><span lang="en-US">NO</span></font>», если искомого назначения тарифных номеров не существует. В противном случае в первую строку выведите «<font face="Courier New, monospace"><span lang="en-US">YES</span></font>», а в следующей строке — <span lang="en-US"><i>N</i></span> целых положительных чисел, где <span lang="en-US"><i>i</i></span>-е число — тарифный номер <span lang="en-US"><i>i</i></span>-й станции. Тарифный номер каждой станции должен находиться в диапазоне от 1 до <i>N</i>.</font></p>
<p style="margin-bottom: 0cm"><font size="1">Если существует несколько решений, необходимо вывести любое из них.</font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0.11cm" align="justify"><font face="Arial, sans-serif" size="1"><i><b>Примеры</b></i></font></p>
<table bordercolor="#000000" cellspacing="0" cellpadding="7" width="669" border="1"><colgroup><font size="1"><col width="319"></col></col><//col></col><//col></><//><col width="320"></col></col><//col></col><//col></><//></font></colgroup><tbody> 
  <tr valign="top"> 
    <td width="319"> 
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1"><b>rail.in</b></font></font></p> 
    </td> 
    <td width="320"> 
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1"><b>rail.out</b></font></font></p> 
    </td> 
  </tr> 
  <tr valign="top"> 
    <td width="319"> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">4 3</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">1 4</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">2 4</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">3 4</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">3</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">1 4 2 0</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">2 4 3 0</font></font></p> 
      <p lang="en-US" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">3 4 1 0</font></font></p> 
    </td> 
    <td width="320"> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">NO</font></font></p> 
      <p lang="en-US" align="left"><font size="1"><br /></font></p> 
    </td> 
  </tr> 
  <tr valign="top"> 
    <td width="319"> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">5 4</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">1 5</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">2 5</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">3 5</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">4 5</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">4</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">1 5 2 0</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">2 5 3 0</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">3 5 4 0</font></font></p> 
      <p lang="en-US" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">4 5 1 0</font></font></p> 
    </td> 
    <td width="320"> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">YES</font></font></p> 
      <p lang="en-US" style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="1">1 4 1 5 3</font></font></p> 
      <p lang="en-US" align="left"><font size="1"><br /></font></p> 
    </td> 
  </tr></tbody> 
</table></div><div class="statements_chapter"><a name="ch51"></a><p class="statements_chapter_title"><B>Problem C.</B> Ударим мостом по бездорожью</p><br />
<table cellspacing="0" cellpadding="7" width="667" border="0"><colgroup><col width="302"></col></col><//col></colgroup><tbody>
  <tr valign="top">
    <td width="302">
      <p align="justify"><font style="font-size: 11pt" size="2"><i>Максимальное время работы на одном тесте:</i></font></p>
    </td>
    <td width="337">
      <p lang="en-US" style="font-style: normal" align="justify"><font style="font-size: 11pt" size="2">1 секунда</font></p>
    </td>
  </tr>
  <tr valign="top">
    <td width="302">
      <p align="justify"><font style="font-size: 11pt" size="2"><i>Максимальный объем используемой памяти:</i></font></p>
    </td>
    <td width="337">
      <p lang="en-US" style="font-style: normal" align="justify"><font style="font-size: 11pt" size="2">256 мегабайт</font></p>
    </td>
  </tr></tbody>
</table>
<p style="margin-bottom: 0cm; text-indent: 0.95cm"><font style="font-size: 11pt" size="2">Профиль Уральских гор задается ломаной (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2">), (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2">), …, (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2">), для координат вершин которой верны неравенства </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2"> &lt; </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2"> &lt; … &lt; </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2">. Начальные и конечные точки профиля расположены на уровне моря (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2"><span lang="en-US"> </span></font><font style="font-size: 11pt" size="2">=</font><font style="font-size: 11pt" size="2"><span lang="en-US"> </span></font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2"> = 0).</font></p>
<p style="margin-bottom: 0cm; text-indent: 0.95cm"><font style="font-size: 11pt" size="2">На горном профиле заданы две различные точки </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>A</i></span></font><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>B</i></span></font><font style="font-size: 11pt" size="2">, между которыми требуется проложить дорогу. Эта дорога будет проходить по склонам гор и проектируемому горизонтальному мосту, длина которого не должна превышать </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>L</i></span></font><font style="font-size: 11pt" size="2"><i>.</i></font><font style="font-size: 11pt" size="2"> Оба конца моста находятся на горном профиле. Дорога заходит на мост с одного конца и выходит с другого. Мост не может содержать точек, расположенных строго под ломаной (строительство тоннелей не предполагается).</font></p>
<table cellspacing="0" cellpadding="7" width="695" border="0"><colgroup><col width="390"></col></col><//col><col width="276"></col></col><//col></colgroup><tbody>
  <tr valign="top">
    <td width="390">
      <p align="center"><font size="2"><i>Возможные примеры расположения моста</i></font></p>
      <p align="center"><img title="1" height="115" alt="1" hspace="0" src="http://informatics.mccme.ru/moodle/file.php/4/image02.gif" width="339" border="0" /></p>
    </td>
    <td width="276">
      <p align="center"><font size="2"><i>Невозможное расположение моста</i></font></p>
      <p align="center"><img title="2" height="114" alt="2" hspace="0" src="http://informatics.mccme.ru/moodle/file.php/4/image04.gif" width="159" border="0" /></p>
    </td>
  </tr></tbody>
</table>
<p style="margin-bottom: 0cm; text-indent: 0.95cm"><font style="font-size: 11pt" size="2">Достоверно известно, что строительство такого моста в данной местности возможно, причем позволит сократить длину дороги из точки </font><font style="font-size: 11pt" size="2"><i>A</i></font><font style="font-size: 11pt" size="2"> в точку </font><font style="font-size: 11pt" size="2"><i>B</i></font><font style="font-size: 11pt" size="2">. Требуется написать программу, которая определит такое расположение горизонтального моста, что длина дороги от точки </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>A</i></span></font><font style="font-size: 11pt" size="2"> до точки </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>B</i></span></font><font style="font-size: 11pt" size="2"> будет наименьшей.</font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0cm" align="justify"><font face="Arial, sans-serif"><font size="3"><i><b>Формат входных данных</b></i></font></font></p>
<p style="margin-bottom: 0cm"><font style="font-size: 11pt" size="2">Первая строка входного файла содержит два целых числа </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>L</i></span></font><font style="font-size: 11pt" size="2"> — количество вершин ломаной (2 ≤ </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font><font style="font-size: 11pt" size="2"><i> </i></font><font style="font-size: 11pt" size="2">≤ 100 000) и максимальную длину моста (1 ≤ </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>L</i></span></font><font style="font-size: 11pt" size="2"><i> </i></font><font style="font-size: 11pt" size="2">≤ 10</font><sup><font style="font-size: 11pt" size="2">6</font></sup><font style="font-size: 11pt" size="2">) соответственно. Вторая строка входного файла содержит координаты точки </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>A</i></span></font><font style="font-size: 11pt" size="2">, третья строка — координаты точки </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>B</i></span></font><font style="font-size: 11pt" size="2">. Точки </font><font style="font-size: 11pt" size="2"><i>A</i></font><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><i>B </i></font><font style="font-size: 11pt" size="2">различны.</font></p>
<p style="margin-bottom: 0cm"><font style="font-size: 11pt" size="2">Последующие </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font><font style="font-size: 11pt" size="2"> строк содержат координаты вершин ломаной (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2">), (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2">), …, (</font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2">, </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2">). Координаты вершин ломаной, а также точек </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>A</i></span></font><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>B</i></span></font><font style="font-size: 11pt" size="2">, задаются парой целых чисел, не превосходящих по абсолютному значению 10</font><sup><font style="font-size: 11pt" size="2">6</font></sup><font style="font-size: 11pt" size="2">. Гарантируется, что </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2"> &lt; </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2">2</font></sub><font style="font-size: 11pt" size="2"> &lt; … &lt; </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>x</i></span></font><sub><font style="font-size: 11pt" size="2"><i>N</i></font></sub><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2">1</font></sub><font style="font-size: 11pt" size="2"><span lang="en-US"> </span></font><font style="font-size: 11pt" size="2">=</font><font style="font-size: 11pt" size="2"><span lang="en-US"> </span></font><font style="font-size: 11pt" size="2"><span lang="en-US"><i>y</i></span></font><sub><font style="font-size: 11pt" size="2"><span lang="en-US"><i>N</i></span></font></sub><font style="font-size: 11pt" size="2"> = 0, а также, что точки </font><font style="font-size: 11pt" size="2"><i>A</i></font><font style="font-size: 11pt" size="2"> и </font><font style="font-size: 11pt" size="2"><i>B</i></font><font style="font-size: 11pt" size="2"> принадлежат ломаной.</font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0cm" align="justify"><font face="Arial, sans-serif"><font size="3"><i><b>Формат выходных данных</b></i></font></font></p>
<p style="margin-bottom: 0cm"><font style="font-size: 11pt" size="2">В первой и второй строках выходного файла выведите координаты концов моста с точностью не менее 5 знаков после десятичной точки. В случае, когда решений несколько, выведите любое из них. </font></p>
<p style="margin-top: 0.21cm; margin-bottom: 0cm" align="justify"><font face="Arial, sans-serif"><font size="3"><i><b>Примеры</b></i></font></font></p>
<table bordercolor="#000000" cellspacing="0" cellpadding="7" width="688" border="1"><colgroup><col width="314"></col></col><//col><col width="345"></col></col><//col></colgroup><tbody>
  <tr valign="top">
    <td width="314">
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font size="2"><b>bridge.in</b></font></font></p>
    </td>
    <td width="345">
      <p lang="en-US" align="center"><font face="Courier New, monospace"><font size="2"><b>bridge.out</b></font></font></p>
    </td>
  </tr>
  <tr valign="top">
    <td width="314">
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">4 6</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">13 0</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">2 1</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">1 0</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">5 4</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">11 -2</font></font></p>
      <p align="left"><font face="Courier New, monospace"><font size="2">13 0</font></font></p>
    </td>
    <td width="345">
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">13.00000 0.00000</font></font></p>
      <p lang="en-US" align="left"><font face="Courier New, monospace"><font style="font-size: 11pt" size="2"><font size="2">9</font><font size="2"><span lang="ru-RU">.00000 0.00000</span></font></font></font></p>
    </td>
  </tr>
  <tr valign="top">
    <td width="314">
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">6 8</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">3 -6</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">11 -2</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">0 0</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">4 -8</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">6 -4</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">7 -4</font></font></p>
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">9 -6</font></font></p>
      <p align="left"><font face="Courier New, monospace"><font size="2">12 0</font></font></p>
    </td>
    <td width="345">
      <p style="margin-bottom: 0cm" align="left"><font face="Courier New, monospace"><font size="2">2.00000 -4.00000</font></font></p>
      <p align="left"><font face="Courier New, monospace"><font size="2">10.00000 -4.00000</font></font></p>
    </td>
  </tr></tbody>
</table>
<p style="margin-top: 0.21cm; margin-bottom: 0cm" align="justify"><font face="Arial, sans-serif"><font size="3"><i><b>Примечание</b></i></font></font></p>
<p style="margin-bottom: 0cm; text-indent: 1.25cm" align="justify"><font style="font-size: 11pt" size="2">Решения, корректно работающие при <span lang="en-US"><i>N</i></span> ≤ 2000, будут оцениваться, исходя из 80 баллов.</font></p></div></body> </html>